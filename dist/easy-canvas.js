(()=>{var t={6:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const s=class{constructor(t){this.type="Line"}}},625:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const s=class{constructor({src:t,x:e,y:i}){this.src=t,this.height=t.height,this.width=t.width,this.x=e,this.y=i,this.type="Image"}_draw(t){const{src:e,x:i,y:s}=this;t.drawImage(e,i,s,e.width,e.height)}}},834:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const s=class{constructor({x:t,y:e,height:i,width:s,fillStyle:h}){this.x=t,this.y=e,this.height=i,this.width=s,this.fillStyle=h,this.type="Rect"}_draw(t){const{fillStyle:e,x:i,y:s,height:h,width:n}=this;t.fillStyle=e,t.fillRect(i,s,h,n)}}},990:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const s=class{constructor({el:t,height:e,width:i,stored:s}){this.canvas=null,this.objects=[],this.controls=[],this.redo=[],this.undo=[],this.activeObject=null,this.paddingX=0,this.paddingY=0,this.height=e,this.width=i,this.stored=s,this.init(t),this.bindEvent()}init(t){const e=document.querySelector(t),i=document.createElement("canvas");e.appendChild(i),i.height=this.height,i.width=this.width,this.canvas=i,this.ctx=i.getContext("2d")}bindEvent(){const{canvas:t}=this;t.addEventListener("mousedown",(t=>{const{offsetX:e,offsetY:i}=t,s=this.objects.filter((t=>this.isIncludesTheRange(e,i,t)));s.length?(this.activeObject=1===s.length?s[0]:s[s.length-1],this.render(),this.drawControl(this.activeObject),this.paddingX=e-this.activeObject.x,this.paddingY=i-this.activeObject.y):this.render()})),t.addEventListener("mousemove",(t=>{if(!this.activeObject)return;const{offsetX:e,offsetY:i}=t;this.activeObject.x=e-this.paddingX,this.activeObject.y=i-this.paddingY,this.render(),this.drawControl(this.activeObject),this.drawHelpLine()})),document.addEventListener("mouseup",(t=>{this.activeObject&&this.reset(),this.activeObject&&this.stored&&this.save()})),t.addEventListener("contextmenu",(t=>{this.activeObject&&console.log(123),t.preventDefault()}))}setCenter(t){const e=this.width/2,i=this.height/2;t.x=e-t.width/2,t.y=i-t.height/2}drawHelpLine(){this.isCenterY()&&this.drawLine({beginPoint:{x:0,y:this.height/2},endPoint:{x:this.width,y:this.height/2},lineWidth:.5,strokeStyle:"red"},this.ctx),this.isCenterX()&&this.drawLine({beginPoint:{x:this.width/2,y:0},endPoint:{x:this.width/2,y:this.height},lineWidth:.5,strokeStyle:"red"},this.ctx)}isCenterY(){const t=this.height/2,e=this.activeObject.y+this.activeObject.height/2;return t-2<e&&e<t+2}isCenterX(){const t=this.width/2,e=this.activeObject.x+this.activeObject.width/2;return t-2<e&&e<t+2}save(){this.redo.push(this.objects)}reset(){this.activeObject=null,this.paddingX=0,this.paddingY=0}drawControl(t){const{x:e,y:i,height:s,width:h}=t;this.drawLine({beginPoint:{x:e,y:i},endPoint:{x:e+h,y:i},lineWidth:2,strokeStyle:"red"},this.ctx),this.drawLine({beginPoint:{x:e,y:i},endPoint:{x:e,y:i+s},lineWidth:2,strokeStyle:"red"},this.ctx),this.drawLine({beginPoint:{x:e+h,y:i},endPoint:{x:e+h,y:i+s},lineWidth:2,strokeStyle:"red"},this.ctx),this.drawLine({beginPoint:{x:e,y:i+s},endPoint:{x:e+h,y:i+s},lineWidth:2,strokeStyle:"red"},this.ctx)}isIncludesTheRange(t,e,{x:i,y:s,height:h,width:n}){return t>i&&t<i+n&&e<s+h&&e>s}add(t){this.objects.push(t)}draw(t){const{ctx:e}=this;t._draw(e)}drawLine({beginPoint:t,endPoint:e,lineWidth:i,strokeStyle:s},h){h.beginPath(),h.strokeStyle=s,h.lineWidth=i,h.moveTo(t.x,t.y),h.lineTo(e.x,e.y),h.stroke()}clear(){const{height:t,width:e}=this.canvas;this.ctx.fillStyle="white",this.ctx.fillRect(0,0,t,e)}render(){this.clear(),this.objects.forEach((t=>{console.log("123"),this.draw(t)}))}upper(t){}lower(t){}}},347:(t,e,i)=>{var s={"./Line":6,"./Line.js":6,"./Photo":625,"./Photo.js":625,"./Rect":834,"./Rect.js":834,"./canvas":990,"./canvas.js":990};function h(t){var e=n(t);return i(e)}function n(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}h.keys=function(){return Object.keys(s)},h.resolve=n,t.exports=h,h.id=347}},e={};function i(s){if(e[s])return e[s].exports;var h=e[s]={exports:{}};return t[s](h,h.exports,i),h.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(347)})();